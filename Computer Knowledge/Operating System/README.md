이 글은 인프런 감자님의 `그림으로 쉽게 배우는 운영체제`를 참고하였습니다.

# 운영체제
`운영체제 (Operating System)`는 컴퓨터 시스템의 핵심 소프트웨어로, 컴퓨터 하드웨어와 응용 프로그램 간의 상호작용을 관리하고 제어하는 역할을 한다.

- 프로세스 관리: 운영체제는 프로세스의 생성, 실행, 일시 정지, 중단, 스케줄링 등을 관리한다. 이를 통해 여러 응용 프로그램이 동시에 실행되며, CPU 자원을 효율적으로 활용할 수 있다.
- 메모리 관리: 운영체제는 시스템의 메모리를 효율적으로 할당하고 관리한다. 이는 프로세스 간 메모리 공간을 분리하고 보호하여 프로세스 간 충돌을 방지하며, 가상 메모리를 통해 더 많은 프로세스를 실행할 수 있도록 한다.
- 하드웨어 관리: 이것은 자원 관리의 일부로, 운영체제가 하드웨어 자원(예: CPU, 디스크, 네트워크 장치 등)을 관리한다. 이는 장치 드라이버를 로드하고 사용자 및 응용 프로그램이 하드웨어를 사용할 수 있도록 인터페이스를 제공하는 것을 포함한다.
- 파일 시스템 관리: 파일 시스템은 데이터를 저장, 구성 및 관리하는 방법을 제공한다. 운영체제는 파일을 생성, 삭제, 이동, 복사하는 등의 파일 관리 작업을 지원하고 파일에 대한 접근 권한 및 보안을 관리한다.

# 운영체제의 구조
![image](https://github.com/skcy1515/Programming-Study/assets/140364849/2545dd6e-727a-4870-8e52-d80ad3f4c87f)
- 운영체제의 핵심은 `커널`
- 커널은 프로세스와 메모리, 저장장치를 관리하는 핵심적인 기능을 담당

### 인터페이스
- 사용자는 커널에 직접 접근할 수 없고 인터페이스를 통해서 접근
- 인터페이스는 `GUI`와 `CLI`로 나뉨
  - GUI: 그래픽으로 된 인터페이스, 윈도우, 맥os
  - CLI: 유닉스나 리눅스같은 운영체제가 기본적으로 제공하는 인터페이스, 텍스트를 이용해 커널과 상호작용함

### 시스템 콜
- 어플리케이션은 `시스템 콜`이라는 인터페이스를 통해서 커널에 접근 가능
- 커널은 사용자로부터 자신을 보호하기 위한 시스템 콜이라는 인터페이스를 가짐
- 시스템 콜을 이용하면 커널에서 제공하는 Write 함수를 쓰게 되는데, 그럼 운영체제가 알아서 하드디스크의 빈 공간에 저장하게 됨

### 드라이버
- 하드웨어와 커널의 인터페이스로는 `드라이버`를 사용
- 하드웨어를 제작한 제조사에서 드라이버를 만들어 제공하는 게 일반적
- 보통 키보드나 마우스 같은 간단한 장치들은 커널에 포함되어 있지만, 그래픽카드나 타블렛같은 복잡한 장치들은 디바이스 드라이버를 설치해서 사용해야함

# 컴퓨터 하드웨어와 구조
- 오늘날 대부분의 컴퓨터는 프로그램 내장 방식의 폰 노이만 구조를 하고 있음
- 예전엔 에니악과 같이 하드웨어로 프로그램을 만들었어서 프로그램이 달라질 때마다 매번 스위치와 배선을 다시 조정해야 했음
- 폰 노이만은 이를 해결하기 위해 CPU와 메모리를 두고 이들 사이를 버스로 연결
  - 버스: 데이터를 전달하는 통로
- 프로그램은 메모리에 올려서 실행시키는데 프로그램을 메모리에 내장했다고 해서 프로그램 내장방식이라 부름
- 메모리에 올라간 프로그램은 명령에 따라 처리되고 배선을 바꾸는 대신 소프트웨어만 바꿔주면 되기 때문에 상당히 편리해짐

### 컴퓨터 하드웨어
![image](https://github.com/skcy1515/Programming-Study/assets/140364849/e4e7fbe7-6850-4d67-95f0-c391b4b92958)

- `메인보드` : 다른 하드웨어를 연결하는 장치 
  - 장치 간에 데이터를 전송하는 것은 메인보드의 버스가 담당
  - CPU, 메모리, 하드디스크, 그래픽카드, 모니터 선, USB, 마우스, 키보드, 스피커
  
![image](https://github.com/skcy1515/Programming-Study/assets/140364849/f7937995-30c6-40e7-9e2e-f82ac466e951)

- `CPU` : 중앙처리장치
  - 제어장치: 모든 장치들의 동작을 지시하고 제어하는 장치
  - 산술논리 연산장치: 데이터 연산을 담당
  - 레지스터: CPU 내에서 계산을 위해 임시로 보관하는 장치 (변수라고 생각하면 됨)

![image](https://github.com/skcy1515/Programming-Study/assets/140364849/56e869b5-2490-41f6-84e2-40d9eeab6346)

- `메모리` : RAM, ROM
- RAM(Random Access Memory): 컴퓨터가 실행 중인 프로그램 및 데이터를 일시적으로 저장하는 주 기억장치
  - CPU가 빠르게 액세스할 수 있도록 메모리에 접근하는 데 사용됨
  - 읽고 쓸 수 있는 휘발성 메모리로, 전원이 꺼지면 저장된 데이터가 소멸
- ROM(Read Only Memory): 읽기 전용 메모리로, 데이터를 읽을 수만 있고 쓸 수 없음
  - 저장된 데이터는 전원이 꺼져도 유지됨
  - 주로 시스템의 기본적인 부팅 및 초기화 작업을 위해 사용 (바이오스)

# 컴퓨터의 부팅 과정
1. 전원 버튼 누르기
2. ROM에 저장된 바이오스 실행
3. 바이오스는 CPU, RAM, 하드디스크 등 주요 하드웨어에 이상이 없는지 체크
4. 이상이 없으면 하드디스크에 있는 마스터 부트 레코드에 저장된 부트로더를 메모리로 가져와서 실행
5. 운영체제를 메모리로 불러와 모니터에 띄움
6. 이제부터 실행되는 모든 응용 프로그램은 메모리에 올라와서 운영체제가 관리

# 인터럽트
`인터럽트`는 컴퓨터 시스템에서 발생하는 이벤트로, 신호가 오면 현재 실행 중인 프로세스나 작업의 흐름을 일시적으로 중단하고 다른 이벤트에 대응하는 데 사용된다.

CPU가 입출력 장치에 데이터를 읽거나 쓰려고 하는 상황을 생각해 보자. CPU는 입출력 작업이 들어오면 입출력 관리자에게 입출력 명령을 내린다. CPU관점에선 입출력 명령이 언제 완료될지 알 수 없기 때문에 주기적으로 계속 확인해줘야 한다. 이러한 방식을 `폴링(Polling)` 방식이라고 한다.

폴링 방식의 단점은 주기적으로 CPU가 확인해줘야 하니 성능이 좋지 않은데, 인터럽트는 폴링 방식의 단점을 해결한 방식이다. (치킨을 주문해놓고 문 앞에서 목빠지게 기다렸던 것이 polling 방식이라면, 치킨이 튀겨지는 동안 은행 등의 다른 볼일을 보다가 치킨 집에서 연락이 오면(인터럽트) 맞춰서 찾아가는 것)
 
CPU가 입출력 관리자에게 입출력 명령을 내리고 자신은 다른 작업을 계속 한다. 입출력 관리자는 입출력이 완료됐을 때 CPU에게 신호를 주고 CPU는 그 신호를 받아 `인터럽트 서비스 루틴(ISR)`을 실행시켜 작업을 완료한다. (인터럽트 서비스 루틴은 특정 인터럽트가 들어오면 그 인터럽트를 처리하는 함수) 

인터럽트는 두 가지로 나뉜다.
- 하드웨어 인터럽트: 하드웨어 장치(입출력)에서 발생
- 소프트웨어 인터럽트: 사용자 프로그램에서 발생


