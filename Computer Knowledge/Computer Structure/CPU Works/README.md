# ALU
CPU 내부에는 ALU와 제어장치 그리고 여러 개의 레지스터가 있다. `ALU(arithmetic and logical unit, 산술 논리 연산 장치)`는 계산을 담당하고, `제어장치`는 명령어를 읽어 들이고 해석한다. 레지스터는 CPU 안에 있는 작은 임시 저장장치이다.

![image](https://github.com/skcy1515/Programming-Study/assets/140364849/8598cfbd-7e10-4fb6-ace8-09003cf90039)

ALU는 레지스터를 통해 피연산자를 받아들이고, 제어장치로부터 수행할 연산을 알려주는 제어 신호를 받아들인다. ALU는 레지스터와 제어장치로부터 받아들인 피연산자와 제어 신호로 산술 연산, 논리 연산 등 다양한 연산을 수행한다. 연산을 수행한 결과는 특정 숫자나 문자가 될 수 있고, 메모리 주소가 될 수 있다. 이러한 결괏값은 바로 메모리에 저장되지 않고, 일시적으로 레지스터에 저장된다.

### 플래그
ALU는 계산 결과와 더불어 플래그를 내보낸다. 이전에 이진수가 양수인지 음수인지 판별할 때 플래그가 이용된다고 언급한 적 있다. 이러한 연산 결과에 대한 추가적인 상태 정보를 플래그(flag)라고 한다. ALU가 내보내는 대표적인 플래그는 아래와 같다.

![image](https://github.com/skcy1515/Programming-Study/assets/140364849/076286e1-312e-4c3b-9f7a-55f23413b690)

플래그들은 플래그 레지스터라는 레지스터에 저장된다.

# 제어 장치
- 제어장치 : 제어 신호를 내보내고, 명령어를 해석하는 부품
- 제어신호 : 컴퓨터 부품들을 관리하고 작동시키기 위한 일종의 전기 신호

![image](https://github.com/skcy1515/Programming-Study/assets/140364849/4b107b75-0199-4cf6-a311-71998dbfdf20)

### 제어장치가 받아들이는 정보
- 제어장치는 클럭 신호를 받아들인다.
- 제어장치는 해석해야 할 명령어를 받아들인다.
- 제어 장치는 플래그 레지스터 속 플래그 값을 받아들인다.
- 제어장치는 시스템 버스, 그중에서 제어 버스로 전달된 제어 신호를 받아들인다.

1. 클럭 신호를 받아들인다: `클럭`이란 컴퓨터의 모든 부품을 일사불란하게 움직일 수 있게 하는 시간 단위이다. 클럭의 주기에 맞춰, 모든 부품이 작동하게 된다. 하지만 모든 부품이 같은 클럭에 작동하는 것은 아니다.
2. 해석해야할 명령어를 받아들인다: CPU가 해석해야 할 명령어는 명령어 레지스터라는 특별한 레지스터에 저장된다. 제어장치는 명령어 레지스터로부터 해석할 명령어를 받아들이고 해석한 뒤, 제어 신호를 발생시켜 컴퓨터 부품들에 수행해야 할 내용을 알려준다.
3. 플래그 레지스터 속 플래그 값을 받아들인다: 플래그는 ALU 연산에 대한 추가적인 상태 정보이다. 그렇기에 제어장치는 플래그 값을 받아들이고 이를 참고하여 제어 신호를 발생시킨다.
4. 시스템 버스, 그중에서 제어 버스로 전달된 제어 신호를 받아들인다: 제어 신호는 CPU 뿐만 아니라 입출력장치를 비롯한 CPU 외부 장치도 발생시킬 수 있다. 제어장치는 제어 버스를 통해 외부로부터 전달된 제어 신호를 받아들이기도 한다.

### 제어장치가 내보내는 정보
- CPU 외부에 전달하는 제어 신호
  - 메모리 : 메모리를 읽기, 쓰기
  - 입출력장치(보조기억장치 포함) : 입출력장치 읽기 / 쓰기
  - 제어장치가 CPU 외부에 제어 신호를 전달
  - 제어장치가 CPU 외부에 제어 신호를 전달한다는 말은 제어 버스로 제어 신호를 내보낸다는 말과 같다.
- CPU 내부에 전달하는 제어 신호
  - ALU : 수행할 연산을 지시
  - 레지스터 : 레지스터 간 데이터 이동, 레지스터에 저장된 명령어 해석

# 레지스터
레지스터는 CPU 내부의 작은 임시저장장치, 프로그램 속 명령어 & 데이터는 실행 전후로 레지스터에 저장한다.

### 레지스터의 종류
- 프로그램 카운터: 메모리에서 가져올 명령어의 주소(메모리에서 읽어 들일 명령어의 주소)를 저장
- 명령어 레지스터: 방금 읽어 들어 들인 명령어를 저장하는 레지스터, 제어장치는 명령어 레지스터 속 명령어를 받아들이고 해석한 뒤 제어 신호를 내보냄
- 메모리 주소 레지스터: 메모리의 주소를 저장하는 레지스터, CPU가 읽고자 하는 주소 값을 주소 버스로 보낼 때 메모리 주소 레지스터를 거침
- 메모리 버퍼 레지스터: 메모리와 주고받을 값(데이터와 명령어)을 저장하는 레지스터, CPU가 데이터 버스로 주고받을 값은 메모리 버퍼 레지스터를 거침
- 플래그 레지스터: 연산 결과 또는 CPU 상태에 대한 부가적인 정보를 저장하는 레지스터
- 범용 레지스터: 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터
- 스택 포인터: 스택의 꼭대기를 가리킴
- 베이스 레지스터: 기준 주소를 저장함 

### 특정 레지스터를 이용한 주소 지정 방식
-스택 주소 지정 방식: 스택과 스택 포인터를 이용한 주소 지정 방식
- 베이스 레지스터 주소 지정 방식: 오퍼랜드 필드의 값과 베이스 레지스터의 값을 더하여 유효 주소 얻기
- 상대 주소 지정 방식: 오퍼랜드 필드의 값과 프로그램 카운터의 값을 더하여 유효 주소 얻기

